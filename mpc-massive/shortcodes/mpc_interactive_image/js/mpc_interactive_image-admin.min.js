!function(a){"use strict";var b=a("#vc_ui-panel-edit-element");b.on("mpc.render",function(){if("mpc_interactive_image"==b.attr("data-vc-shortcode")){var c=a('.vc_shortcode-param[data-vc-shortcode-param-name="preview_divider"] .edit_form_line'),d=a('<button class="mpc-vc-button button mpc-default mpc-preview">'+_mpc_lang.mpc_interactive_image.preview+"</button>"),e=a('<div class="mpc-coords__preview" />'),f=[];c.append(d),d.after(e).after("<br>"),f=vc.shortcodes.where({parent_id:vc.active_panel.model.attributes.id}),d.on("click",function(){var c=b.find(".wpb_vc_param_value.background_image").val();e.html(""),""==c?e.append('<p class="mpc-error">'+_mpc_lang.mpc_interactive_image.no_background+"</p>"):0==f.length?e.append('<p class="mpc-error">'+_mpc_lang.mpc_interactive_image.no_hotspots+"</p>"):a.post(ajaxurl,{action:"mpc_interactive_image_get_image",image_id:c},function(b){if("error"==b)return void e.append('<p class="mpc-error">'+_mpc_lang.mpc_interactive_image.no_background+"</p>");e.append(b).addClass("mpc-loaded");var c=e.find(".mpc-coords__image")[0].width;e.css("max-width",c);for(var d=0;d<f.length;d++){var g=a('<div class="mpc-coords__point" />'),h=f[d].attributes.params.position.split("||");2==h.length&&(h[0]=isNaN(parseFloat(h[0]))?50:parseFloat(h[0]),h[1]=isNaN(parseFloat(h[1]))?50:parseFloat(h[1]),g.css({left:h[0]+"%",top:h[1]+"%"}),e.append(g))}})})}})}(jQuery);