{"version":3,"sources":["../../lib/assets/javascripts/os-time.js","../../lib/assets/javascripts/os-actions.js","../../lib/assets/javascripts/os-notifications.js","../../lib/assets/javascripts/os-shared.js","../../lib/assets/javascripts/os-updates.js","../../lib/assets/javascripts/main_back.js","../../lib/assets/javascripts/os-google-calendar.js"],"names":["latepoint_is_timeframe_in_periods","timeframe_start","timeframe_end","periods_arr","is_inside","arguments","length","undefined","i","period_start","period_end","buffer_before","buffer_after","period_info","split","parseFloat","latepoint_is_period_inside_another","latepoint_is_period_overlapping","period_one_start","period_one_end","period_two_start","period_two_end","latepoint_minutes_to_hours","time","army_clock","latepoint_is_army_clock","hours","Math","floor","latepoint_am_or_pm","minutes","latepoint_hours_and_minutes_to_minutes","hours_and_minutes","ampm","hours_and_minutes_arr","parseInt","latepoint_get_time_system","latepoint_helper","time_system","latepoint_minutes_to_hours_and_minutes","format","sprintf","latepoint_generate_form_message_html","messages","status","message_html","Array","isArray","forEach","message","latepoint_clear_form_messages","$form","find","remove","latepoint_show_data_in_lightbox","extra_classes","jQuery","lightbox_css_classes","append","addClass","latepoint_add_notification","message_type","wrapper","latepoint_mask_timefield","$elem","inputmask","alias","inputFormat","placeholder","latepoint_mask_phone","latepoint_is_phone_masking_enabled","latepoint_get_phone_format","phone_format","enable_phone_masking","latepoint_show_booking_end_time","show_booking_end_time","latepoint_init_form_masks","latepoint_get_paypal_payment_amount","$booking_form_wrapper","payment_portion","payment_amount","val","data","latepoint_check_for_updates","$log_wrapper","route","action","route_name","params","return_format","ajax","type","dataType","url","ajaxurl","success","response","removeClass","html","alert","$version_info_wrapper","$addons_info_wrapper","latepoint_quick_booking_customer_selected","latepoint_custom_day_removed","closest","fadeOut","this","latepoint_booking_synced","latepoint_sync_update_progress","latepoint_gcal_event_deleted","latepoint_booking_unsynced","latepoint_count_connected_services","$agent_wrapper","connected_services_count","all_services_count","text","latepoint_custom_field_removed","latepoint_coupon_removed","latepoint_init_custom_fields_form","on","toggleClass","show","hide","latepoint_init_coupons_form","latepoint_init_reminders_form","latepoint_custom_field_saved","latepoint_init_custom_day_schedule","$calendar","target_date_string","layout","$this","slideDown","latepoint_init_updates_page","latepoint_next_available_days_loaded","$btn","parent","latepoint_init_monthly_calendar_navigation","next","latepoint_calendar_set_month_label","load_month_route_name","$calendar_element","calendar_year","calendar_month","selected_agent_id","selected_service_id","booking_info","agent_id","service_id","allow_full_access","prev","last","prepend","latepoint_init_element_togglers","console","log","toggle","latepoint_init_color_picker","each","color","picker","$picker_wrapper","Pickr","create","el","default","comparison","useAsButton","components","preview","opacity","hue","interaction","input","clear","save","onChange","hsva","instance","toHEX","toString","latepoint_lightbox_close","latepoint_reload_select_service_categories","$trigger_elem","attr","latepoint_wizard_item_editing_cancelled","latepoint_load_quick_availability","custom_agent_id","$quick_booking_form","location_id","prop","click","replaceWith","latepoint_init_quick_availability_form","focus","date","service_duration","$form_w","start_minutes","end_minutes","start_hours_and_minutes","end_hours_and_minutes","latepoint_init_work_period_form","latepoint_init_quick_booking_form","latepoint_set_booking_end_time","keyup","toLowerCase","indexOf","latepoint_apply_agent_selector_change","selected_option_html","$selected_option","latepoint_apply_service_selector_change","latepoint_reload_widget","$widget_elem","form_data","serialize","$updated_widget_elem","latepoint_init_daterangepicker","hasClass","latepoint_init_circles_charts","latepoint_init_daily_bookings_chart","latepoint_load_calendar","target_date","$quick_edit_form","start_time","start_time_ampm","start_time_minutes","end_time_minutes","end_time_ampm","$selected_service","Chart","_ref","$dailyBookingsChart","dailyBookingsLabels","dailyBookingsValues","map","Number","dailyBookingsChartMax","max","apply","fontFamily","defaults","global","defaultFontFamily","defaultFontSize","defaultFontStyle","tooltips","titleFontFamily","titleFontSize","titleFontColor","titleFontStyle","titleMarginBottom","bodyFontFamily","bodyFontSize","bodyFontStyle","displayColors","xPadding","yPadding","yAlign","xAlign","cornerRadius","intersect","ctx","getContext","gradientStroke","createLinearGradient","addColorStop","gradientFill","chartDailyBookingsData","labels","datasets","label","fill","lineTension","backgroundColor","_defineProperty","chartDailyBookings","options","responsive","maintainAspectRatio","legend","display","scales","xAxes","ticks","fontSize","fontColor","gridLines","zeroLineColor","yAxes","beginAtZero","suggestedMax","latepoint_reload_daily_agent_widgets","latepoint_init_daily_agent_widgets","latepoint_init_donut_charts","index","chart_colors","chart_labels","chart_values","$chart_canvas","chartDonut","hoverBackgroundColor","borderWidth","hoverBorderColor","animation","animateScale","cutoutPercentage","chart_elem_id","max_value","chart_value","chart_color","chart_color_fade","myCircle","Circles","id","radius","value","maxValue","width","round","colors","duration","wrpClass","textClass","valueStrokeClass","maxValueStrokeClass","styleWrapper","styleText","latepoint_get_order_for_service_categories","picker_start_time","picker_end_time","locale","cancelLabel","daterangepicker","opens","singleDatePicker","startDate","moment","endDate","ev","element","latepoint_filter_table","latepoint_recalculate_services_count_in_category","number_of_services","latepoint_remove_agent_box","$remove_btn","$agent_box","latepoint_remove_service_box","$service_box","latepoint_init_monthly_view","month","year","latepoint_init_copy_on_click_elements","mouseenter","position_info","position","outerWidth","position_left","left","after","top","click_to_copy_prompt","mouseleave","nextAll","$tempElement","select","document","execCommand","$done_prompt","click_to_copy_done","insertAfter","animate","setTimeout","is_removed","synced_total","chart_total","percent","css","latepoint_remove_first_synced_booking_with_google","$trigger","latepoint_sync_next_booking_with_google","$table","$filter_elem","reset_page","filter_params","$table_w","total_pages","showing_from","showing_to","total_records","ready","$","e","confirm","location","reload","window","replace","before","func_name","preventDefault","record_id","form_values_to_update","name","documentElement","body","scrollTop","offset","OsGoogleCalendar","_classCallCheck","_this","gapi","load","client","init","clientId","google_calendar_client_id","discoveryDocs","scope","then","auth2","getAuthInstance","grantOfflineAccess","saveAuthCode","authResult","code","headers","X-Requested-With","google_calendar_is_enabled","google_calendar","off","href","event","$wrapper","query","keyCode","stopPropagation","confirm_message","approve_confirm","reject_confirm","$box","change","booking_id","$schedule_wrapper","add_item_route_name","item_info","$install_btn","addon_name","msg_addon_installed","$next_btn","current_step","step_name","show_prev_btn","show_next_btn","$prev_btn","dragula","slice","querySelectorAll","moves","container","handle","classList","contains","$categories_wrapper","category_datas","service_datas","order_number","parent_id","push","service_order_number","category_id","custom_fields_order_data","$custom_fields_wrapper","new_order_number","$field_id","ordered_fields","fields_for","step_order_data","$steps_wrapper","steps","frame","$image_uploader_trigger","$image_selector_w","$image_container","$image_id_holder","image_exists","open","wp","media","title","button","multiple","attachment","state","get","first","toJSON","ampm_value"],"mappings":"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","sourcesContent":["function latepoint_is_timeframe_in_periods(timeframe_start, timeframe_end, periods_arr) {\n  var is_inside = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : false;\n\n  for (var i = 0; i < periods_arr.length; i++) {\n\n    var period_start = 0;\n    var period_end = 0;\n    var buffer_before = 0;\n    var buffer_after = 0;\n\n    var period_info = periods_arr[i].split(':');\n    if (period_info.length == 2) {\n      period_start = period_info[0];\n      period_end = period_info[1];\n    } else {\n      buffer_before = period_info[2];\n      buffer_after = period_info[3];\n      period_start = parseFloat(period_info[0]) - parseFloat(buffer_before);\n      period_end = parseFloat(period_info[1]) + parseFloat(buffer_after);\n    }\n    if (is_inside) {\n      if (latepoint_is_period_inside_another(timeframe_start, timeframe_end, period_start, period_end)) {\n        return true;\n      }\n    } else {\n      if (latepoint_is_period_overlapping(timeframe_start, timeframe_end, period_start, period_end)) {\n        return true;\n      }\n    }\n  };\n  return false;\n}\n\nfunction latepoint_is_period_overlapping(period_one_start, period_one_end, period_two_start, period_two_end) {\n  // https://stackoverflow.com/questions/325933/determine-whether-two-date-ranges-overlap/\n  return period_one_start < period_two_end && period_two_start < period_one_end;\n}\nfunction latepoint_is_period_inside_another(period_one_start, period_one_end, period_two_start, period_two_end) {\n  return period_one_start >= period_two_start && period_one_end <= period_two_end;\n}\n\nfunction latepoint_minutes_to_hours(time) {\n  var army_clock = latepoint_is_army_clock();\n\n  var hours = Math.floor(time / 60);\n  if (!army_clock && hours > 12) hours = hours - 12;\n  return hours;\n}\n\n\nfunction latepoint_am_or_pm(minutes) {\n  if(latepoint_is_army_clock()) return '';\n  return (minutes < 720) ? 'am' : 'pm';\n}\n\nfunction latepoint_hours_and_minutes_to_minutes(hours_and_minutes, ampm) {\n  var hours_and_minutes_arr = hours_and_minutes.split(':');\n  var hours = hours_and_minutes_arr[0];\n  var minutes = hours_and_minutes_arr[1];\n  if(ampm == \"pm\" && hours<12) hours = parseInt(hours)+12;\n  if(ampm == \"am\" && hours==12) hours = 0;\n  minutes = parseInt(minutes) + (hours * 60);\n  return minutes;\n}\n\nfunction latepoint_get_time_system(){\n  return latepoint_helper.time_system;\n}\n\nfunction latepoint_is_army_clock(){\n  return (latepoint_get_time_system() == '24');\n}\n\nfunction latepoint_minutes_to_hours_and_minutes(time) {\n  var army_clock = latepoint_is_army_clock();\n  var format = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : '%02d:%02d';\n\n  if (time < 1) {\n    return;\n  }\n  var hours = Math.floor(time / 60);\n  if(!army_clock && (hours > 12)) hours = hours - 12;\n  var minutes = time % 60;\n  return sprintf(format, hours, minutes);\n}\n","function latepoint_generate_form_message_html(messages, status){\n  var message_html = '<div class=\"os-form-message-w status-' + status + '\"><ul>';\n  if(Array.isArray(messages)){\n    messages.forEach(function(message){\n      message_html+= '<li>' + message + '</li>';\n    });\n  }else{\n    message_html+= '<li>' + messages + '</li>';\n  }\n  message_html+= '</ul></div>';\n  return message_html;\n}\n\nfunction latepoint_clear_form_messages($form){\n  $form.find('.os-form-message-w').remove();\n}\n\nfunction latepoint_show_data_in_lightbox(message, extra_classes = ''){\n  jQuery('.latepoint-lightbox-w').remove();\n  var lightbox_css_classes = 'latepoint-lightbox-w latepoint-w ';\n  if(extra_classes) lightbox_css_classes+= extra_classes;\n  jQuery('body').append('<div class=\"'+ lightbox_css_classes +'\"><div class=\"latepoint-lightbox-i\">' + message + '<a href=\"#\" class=\"latepoint-lightbox-close\"><i class=\"latepoint-icon latepoint-icon-x\"></i></a></div><div class=\"latepoint-lightbox-shadow\"></div></div>');\n  jQuery('body').addClass('latepoint-lightbox-active');\n}\n\n\n\n// DOCUMENT READY\njQuery(document).ready(function( $ ) {\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n  /* \n    Ajax buttons action\n  */\n  $('.latepoint').on('click', 'button[data-os-action], a[data-os-action], div[data-os-action], span[data-os-action]', function(e){\n    var $this = $(this);\n    if($this.data('os-prompt') && !confirm($this.data('os-prompt'))) return false;\n    var params = $(this).data('os-params');\n    if($(this).data('os-source-of-params')){\n      params = $($(this).data('os-source-of-params')).find('select, input, textarea').serialize();\n    }\n    var return_format = $this.data('os-return-format') ? $this.data('os-return-format') : 'json'\n    var data = { action: 'latepoint_route_call', route_name: $(this).data('os-action'), params: params, return_format: return_format } \n    $this.addClass('os-loading');\n    $.ajax({\n      type : \"post\",\n      dataType : \"json\",\n      url : latepoint_helper.ajaxurl,\n      data : data,\n      success: function(response){\n        if(response.status === \"success\"){\n          if($this.data('os-output-target') == 'lightbox'){\n            latepoint_show_data_in_lightbox(response.message, $this.data('os-lightbox-classes'));\n          }else if($this.data('os-output-target') == 'side-panel'){\n            $('.latepoint-side-panel-w').remove();\n            $('body').append('<div class=\"latepoint-side-panel-w\"><div class=\"latepoint-side-panel-i\">' + response.message + '</div><div class=\"latepoint-side-panel-shadow\"></div></div>');\n          }else if($this.data('os-success-action') == 'reload'){\n            latepoint_add_notification(response.message);\n            location.reload();\n            return;\n          }else if($this.data('os-success-action') == 'redirect'){\n            if($this.data('os-redirect-to')){\n              latepoint_add_notification(response.message);\n              window.location.replace($this.data('os-redirect-to'));\n            }else{\n              window.location.replace(response.message); \n            }\n            return;\n          }else if($this.data('os-output-target') && $($this.data('os-output-target')).length){\n            if($this.data('os-output-target-do') == 'append'){\n              $($this.data('os-output-target')).append(response.message);\n            }else{\n              $($this.data('os-output-target')).html(response.message);\n            }\n          }else{\n            if($this.data('os-before-after') == 'before'){\n              $this.before(response.message);\n            }else if($this.data('os-before-after') == 'before'){\n              $this.after(response.message);\n            }else{\n              latepoint_add_notification(response.message);\n            }\n          }\n          if($this.data('os-after-call')){\n            var func_name = $this.data('os-after-call');\n            if($this.data('os-pass-this')){\n              window[func_name]($this);\n            }else if($this.data('os-pass-response')){\n              window[func_name](response);\n            }else{\n              window[func_name]();\n            }\n          }\n          $this.removeClass('os-loading');\n        }else{\n          $this.removeClass('os-loading');\n          if($this.data('os-output-target') && $($this.data('os-output-target')).length){\n            $($this.data('os-output-target')).prepend(latepoint_generate_form_message_html(response.message, 'error'));\n          }else{\n            alert(response.message);\n          }\n        }\n      }\n    });\n    return false;\n  });\n\n\n  $('.latepoint').on('click', 'form[data-os-action] button[type=\"submit\"]', function(e){\n    $(this).addClass('os-loading');\n  });\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n  /* \n    Form ajax submit action\n  */\n  $('.latepoint').on('submit', 'form[data-os-action]', function(e){\n    e.preventDefault(); // prevent native submit\n    var $form = $(this);\n    var form_data = $form.serialize();\n    var data = { action: 'latepoint_route_call', route_name: $(this).data('os-action'), params: form_data, return_format: 'json' }\n    $form.find('button[type=\"submit\"]').addClass('os-loading');\n    $.ajax({\n      type : \"post\",\n      dataType : \"json\",\n      url : latepoint_helper.ajaxurl,\n      data : data,\n      success: function(response){\n        $form.find('button[type=\"submit\"].os-loading').removeClass('os-loading');\n        latepoint_clear_form_messages($form);\n        if(response.status === \"success\"){\n          if($form.data('os-success-action') == 'reload'){\n            latepoint_add_notification(response.message);\n            location.reload();\n            return;\n          }else if($form.data('os-success-action') == 'redirect'){\n            if($form.data('os-redirect-to')){\n              latepoint_add_notification(response.message);\n              window.location.replace($form.data('os-redirect-to'));\n            }else{\n              window.location.replace(response.message);\n            }\n            return;\n          }else if($form.data('os-output-target') && $($form.data('os-output-target')).length){\n            $($form.data('os-output-target')).html(response.message);\n          }else{\n            if(response.message == 'redirect'){\n              window.location.replace(response.url);\n            }else{\n              latepoint_add_notification(response.message);\n              $form.prepend(latepoint_generate_form_message_html(response.message, 'success'));\n            }\n          }\n          if($form.data('os-record-id-holder') && response.record_id){\n            $form.find('[name=\"' + $form.data('os-record-id-holder') + '\"]').val(response.record_id)\n          }\n          if($form.data('os-after-call')){\n            var func_name = $form.data('os-after-call');\n            if($form.data('os-pass-response')){\n              window[func_name](response);\n            }else{\n              window[func_name]();\n            }\n          }\n          if(response.form_values_to_update){\n            $.each(response.form_values_to_update, function(name, value){\n              $form.find('[name=\"'+ name +'\"]').val(value);\n            });\n          }\n          $('button.os-loading').removeClass('os-loading');\n        }else{\n          $('button.os-loading').removeClass('os-loading');\n          if($form.data('os-show-errors-as-notification')){\n            latepoint_add_notification(response.message, 'error');\n          }else{\n            $form.prepend(latepoint_generate_form_message_html(response.message, 'error'));\n            $([document.documentElement, document.body]).animate({\n                scrollTop: ($form.find(\".os-form-message-w\").offset().top - 30)\n            }, 200);\n          }\n        }\n      }\n    });\n    return false;\n  });\n});","function latepoint_add_notification(message, message_type = 'success'){\n\tvar wrapper = jQuery('body').find('.os-notifications');\n\tif(!wrapper.length){\n\t\tjQuery('body').append('<div class=\"os-notifications\"></div>');\n\t\twrapper = jQuery('body').find('.os-notifications');\n\t}\n\tif(wrapper.find('.item').length > 0) wrapper.find('.item:first-child').remove();\n\twrapper.append('<div class=\"item item-type-'+ message_type +'\">' + message + '<span class=\"os-notification-close\"><i class=\"latepoint-icon latepoint-icon-x\"></i></span></div>');\n}","function latepoint_mask_timefield($elem){\n\tif(jQuery().inputmask){\n\t  $elem.inputmask({\n\t      'alias': 'datetime',\n\t      'inputFormat': latepoint_is_army_clock() ? 'HH:MM' : 'hh:MM',\n\t      'placeholder': 'HH:MM'\n\t  });\n\t}\n}\n\nfunction latepoint_mask_phone($elem){\n\tif(latepoint_is_phone_masking_enabled() && jQuery().inputmask) $elem.inputmask(latepoint_get_phone_format());\n}\n\n\nfunction latepoint_get_phone_format(){\n  return latepoint_helper.phone_format;\n}\n\nfunction latepoint_is_phone_masking_enabled(){\n\treturn (latepoint_helper.enable_phone_masking == 'yes');\n}\n\nfunction latepoint_show_booking_end_time(){\n\treturn (latepoint_helper.show_booking_end_time == 'yes');\n}\n\nfunction latepoint_init_form_masks(){\n\tif(latepoint_is_phone_masking_enabled()) latepoint_mask_phone(jQuery('.os-mask-phone'));\n}\n\nfunction latepoint_get_paypal_payment_amount($booking_form_wrapper){\n\tvar payment_portion = $booking_form_wrapper.find('input[name=\"booking[payment_portion]\"]').val();\n\tvar payment_amount = (payment_portion == 'deposit') ? $booking_form_wrapper.find('.lp-paypal-btn-trigger').data('deposit-amount') : $booking_form_wrapper.find('.lp-paypal-btn-trigger').data('full-amount');\n\treturn payment_amount;\n}","function latepoint_check_for_updates(){\n  if(jQuery('.version-log-w').length){\n    var $log_wrapper = jQuery('.version-log-w');\n    $log_wrapper.addClass('os-loading');\n    var route = $log_wrapper.data('route');\n\n    var data = { action: 'latepoint_route_call', route_name: route, params: '', return_format: 'json' }\n    jQuery.ajax({ type : \"post\", dataType : \"json\", url : latepoint_helper.ajaxurl, data : data,\n      success: function(response){\n        $log_wrapper.removeClass('os-loading');\n        if(response.status === \"success\"){\n          $log_wrapper.html(response.message);\n        }else{\n          alert(response.message, 'error');\n        }\n      }\n    });\n  }\n  if(jQuery('.version-status-info').length){\n\n    var $version_info_wrapper = jQuery('.version-status-info');\n    $version_info_wrapper.addClass('os-loading');\n    var route = $version_info_wrapper.data('route');\n\n    var data = { action: 'latepoint_route_call', route_name: route, params: '', return_format: 'json' }\n    jQuery.ajax({ type : \"post\", dataType : \"json\", url : latepoint_helper.ajaxurl, data : data,\n      success: function(response){\n        $version_info_wrapper.removeClass('os-loading');\n        if(response.status === \"success\"){\n          $version_info_wrapper.html(response.message);\n        }else{\n          alert(response.message, 'error');\n        }\n      }\n    });\n  }\n  if(jQuery('.addons-info-holder').length){\n\n    var $addons_info_wrapper = jQuery('.addons-info-holder');\n    $addons_info_wrapper.addClass('os-loading');\n    var route = $addons_info_wrapper.data('route');\n\n    var data = { action: 'latepoint_route_call', route_name: route, params: '', return_format: 'json' }\n    jQuery.ajax({ type : \"post\", dataType : \"json\", url : latepoint_helper.ajaxurl, data : data,\n      success: function(response){\n        $addons_info_wrapper.removeClass('os-loading');\n        if(response.status === \"success\"){\n          $addons_info_wrapper.html(response.message);\n        }else{\n          alert(response.message, 'error');\n        }\n      }\n    });\n  }\n}\n\n\n// DOCUMENT READY\njQuery(document).ready(function( $ ) {\n  latepoint_check_for_updates();\n});","// @codekit-prepend \"os-time.js\";\n// @codekit-prepend \"os-actions.js\";\n// @codekit-prepend \"os-notifications.js\";\n// @codekit-prepend \"os-shared.js\";\n// @codekit-prepend \"os-updates.js\";\n// @codekit-prepend \"os-google-calendar.js\";\n\nfunction latepoint_quick_booking_customer_selected(){\n  jQuery('.customer-info-w').removeClass('selecting').addClass('selected');\n}\n  \nfunction latepoint_custom_day_removed($elem){\n  $elem.closest('.custom-day-work-period').fadeOut(300, function(){ jQuery(this).remove()});\n}\n\nfunction latepoint_booking_synced($elem){\n  $elem.closest('.os-booking-tiny-box').removeClass('not-synced').addClass('is-synced');\n  latepoint_sync_update_progress(false);\n}\n\nfunction latepoint_gcal_event_deleted($elem){\n  $elem.closest('.os-booking-tiny-box').remove();\n}\n\nfunction latepoint_booking_unsynced($elem){\n  $elem.closest('.os-booking-tiny-box').addClass('not-synced').removeClass('is-synced');\n  latepoint_sync_update_progress(true);\n}\n\nfunction latepoint_count_connected_services($agent_wrapper){\n  var connected_services_count = $agent_wrapper.find('.agent-services-list li.active').length;\n  var all_services_count = $agent_wrapper.find('.agent-services-list li').length;\n  if(connected_services_count == all_services_count){\n    connected_services_count = jQuery('.selected-services').data('all-text');\n    jQuery('.selected-services').removeClass('not-all-selected');\n  }else{\n    connected_services_count = connected_services_count + '/' + all_services_count;\n    jQuery('.selected-services').addClass('not-all-selected');\n  }\n  $agent_wrapper.find('.selected-services strong').text(connected_services_count);\n}\n\nfunction latepoint_custom_field_removed($elem){\n  $elem.closest('.os-custom-field-form').remove();\n}\n\nfunction latepoint_coupon_removed($elem){\n  $elem.closest('.os-coupon-form').remove();\n}\n\nfunction latepoint_init_custom_fields_form(){\n  jQuery('.latepoint-content-w').on('click', '.os-custom-field-form-info', function(){\n    jQuery(this).closest('.os-custom-field-form').toggleClass('os-is-editing');\n    return false;\n  });\n  jQuery('.latepoint-content-w').on('change', 'select.os-custom-field-type-select', function(){\n    if(jQuery(this).val() == 'select'){\n      jQuery(this).closest('.os-custom-field-form').find('.os-custom-field-select-values').show();\n    }else{\n      jQuery(this).closest('.os-custom-field-form').find('.os-custom-field-select-values').hide();\n    }\n  });\n  jQuery('.latepoint-content-w').on('keyup', '.os-custom-field-name-input', function(){\n    jQuery(this).closest('.os-custom-field-form').find('.os-custom-field-name').text(jQuery(this).val());\n  });\n}\n\n\nfunction latepoint_init_coupons_form(){\n  jQuery('.latepoint-content-w').on('click', '.os-coupon-form-info', function(){\n    jQuery(this).closest('.os-coupon-form').toggleClass('os-is-editing');\n    return false;\n  });\n  jQuery('.latepoint-content-w').on('change', 'select.os-coupon-medium-select', function(){\n    if(jQuery(this).val() == 'email'){\n      jQuery(this).closest('.os-coupon-form').find('.os-coupon-email-subject').show();\n    }else{\n      jQuery(this).closest('.os-coupon-form').find('.os-coupon-email-subject').hide();\n    }\n  });\n  jQuery('.latepoint-content-w').on('keyup', '.os-coupon-name-input', function(){\n    jQuery(this).closest('.os-coupon-form').find('.os-coupon-name').text(jQuery(this).val());\n  });\n  jQuery('.latepoint-content-w').on('keyup', '.os-coupon-code-input', function(){\n    jQuery(this).closest('.os-coupon-form').find('.os-coupon-code').text(jQuery(this).val());\n  });\n}\n\nfunction latepoint_init_reminders_form(){\n  jQuery('.latepoint-content-w').on('click', '.os-reminder-form-info', function(){\n    jQuery(this).closest('.os-reminder-form').toggleClass('os-is-editing');\n    return false;\n  });\n  jQuery('.latepoint-content-w').on('change', 'select.os-reminder-medium-select', function(){\n    if(jQuery(this).val() == 'email'){\n      jQuery(this).closest('.os-reminder-form').find('.os-reminder-email-subject').show();\n    }else{\n      jQuery(this).closest('.os-reminder-form').find('.os-reminder-email-subject').hide();\n    }\n  });\n  jQuery('.latepoint-content-w').on('keyup', '.os-reminder-name-input', function(){\n    jQuery(this).closest('.os-reminder-form').find('.os-reminder-name').text(jQuery(this).val());\n  });\n}\n\nfunction latepoint_custom_field_saved($elem){\n}\n\nfunction latepoint_init_custom_day_schedule(){\n  jQuery('#custom_day_calendar_month, #custom_day_calendar_year').on('change', function(){\n    var $calendar = jQuery('.custom-day-calendar-month');\n    var route_name = $calendar.data('route');\n    $calendar.addClass('os-loading');\n    var target_date_string = jQuery('#custom_day_calendar_year').val() + '-' + jQuery('#custom_day_calendar_month').val() + '-01';\n    var data = { action: 'latepoint_route_call', route_name: route_name, params: { target_date_string: target_date_string }, layout: 'none', return_format: 'json' }\n    jQuery.ajax({\n      type : \"post\",\n      dataType : \"json\",\n      url : latepoint_helper.ajaxurl,\n      data : data,\n      success: function(data){\n        $calendar.removeClass('os-loading');\n        if(data.status === \"success\"){\n          $calendar.html(data.message);\n        }else{\n          // console.log(data.message);\n        }\n      }\n    });\n  });\n  jQuery('.custom-day-calendar').on('click', '.os-day', function(){\n    var $this = jQuery(this);\n    jQuery('.custom-day-calendar .os-day.selected').removeClass('selected');\n    $this.addClass('selected');\n    jQuery('.latepoint-lightbox-footer').slideDown(200);\n    if(jQuery('.custom-day-calendar').data('show-schedule') == 'yes') jQuery('.latepoint-lightbox-w').removeClass('hide-schedule');\n    jQuery('.custom_day_schedule_date').val($this.data('date'));\n    return false;\n  });\n}\n\nfunction latepoint_init_updates_page(){\n  \n}\n\nfunction latepoint_next_available_days_loaded($btn){\n  $btn.parent().remove();\n}\n\nfunction latepoint_init_monthly_calendar_navigation(){\n  jQuery('.os-month-next-btn').on('click', function(){\n    // check if next month is already loaded\n    if(jQuery('.os-monthly-calendar-days-w.active + .os-monthly-calendar-days-w').length){\n      jQuery('.os-monthly-calendar-days-w.active').removeClass('active').next('.os-monthly-calendar-days-w').addClass('active');\n      latepoint_calendar_set_month_label();\n    }else{\n      var $btn = jQuery(this);\n      $btn.addClass('os-loading');\n      var load_month_route_name = jQuery(this).data('route');\n      var $calendar_element = jQuery('.os-monthly-calendar-days-w.active');\n      var calendar_year = $calendar_element.data('calendar-year');\n      var calendar_month = $calendar_element.data('calendar-month');\n      if(calendar_month == 12){\n        calendar_year = calendar_year + 1;\n        calendar_month = 1;\n      }else{\n        calendar_month = calendar_month + 1;\n      }\n      var selected_agent_id = jQuery('.agent-select').val();\n      var selected_service_id = jQuery('.service-select').val();\n      var booking_info = { target_date_string: calendar_year + '-' + calendar_month + '-1', agent_id: selected_agent_id, service_id: selected_service_id, allow_full_access: true };\n      var data = { action: 'latepoint_route_call', route_name: load_month_route_name, params: booking_info, layout: 'none', return_format: 'json' }\n      jQuery.ajax({\n        type : \"post\",\n        dataType : \"json\",\n        url : latepoint_helper.ajaxurl,\n        data : data,\n        success: function(data){\n\n          $btn.removeClass('os-loading');\n          if(data.status === \"success\"){\n            jQuery('.os-months').append(data.message);\n            jQuery('.os-monthly-calendar-days-w.active').removeClass('active').next('.os-monthly-calendar-days-w').addClass('active');\n            latepoint_calendar_set_month_label();\n          }else{\n            // console.log(data.message);\n          }\n        }\n      });\n    }\n    return false;\n  });\n  jQuery('.os-month-prev-btn').on('click', function(){\n    // check if prev month is already loaded\n    if(jQuery('.os-monthly-calendar-days-w.active').prev('.os-monthly-calendar-days-w').length){\n      jQuery('.os-monthly-calendar-days-w.active').removeClass('active').prev('.os-monthly-calendar-days-w').addClass('active');\n      latepoint_calendar_set_month_label();\n    }else{\n      var $btn = jQuery(this);\n      $btn.addClass('os-loading');\n      var load_month_route_name = jQuery(this).data('route');\n      var $calendar_element = jQuery('.os-monthly-calendar-days-w.active').last();\n      var calendar_year = $calendar_element.data('calendar-year');\n      var calendar_month = $calendar_element.data('calendar-month');\n      if(calendar_month == 1){\n        calendar_year = calendar_year - 1;\n        calendar_month = 12;\n      }else{\n        calendar_month = calendar_month - 1;\n      }\n      var selected_agent_id = jQuery('.agent-select').val();\n      var selected_service_id = jQuery('.service-select').val();\n      var booking_info = { target_date_string: calendar_year + '-' + calendar_month + '-1', agent_id: selected_agent_id, service_id: selected_service_id };\n      var data = { action: 'latepoint_route_call', route_name: load_month_route_name, params: booking_info, layout: 'none', return_format: 'json' }\n      jQuery.ajax({\n        type : \"post\",\n        dataType : \"json\",\n        url : latepoint_helper.ajaxurl,\n        data : data,\n        success: function(data){\n          $btn.removeClass('os-loading');\n          if(data.status === \"success\"){\n            jQuery('.os-months').prepend(data.message);\n            jQuery('.os-monthly-calendar-days-w.active').removeClass('active').prev('.os-monthly-calendar-days-w').addClass('active');\n            latepoint_calendar_set_month_label();\n          }else{\n            // console.log(data.message);\n          }\n        }\n      });\n    }\n    return false;\n  });\n}\n\nfunction latepoint_calendar_set_month_label(){\n  jQuery('.os-current-month-label').text(jQuery('.os-monthly-calendar-days-w.active').data('calendar-month-label'));\n}\n\n\nfunction latepoint_init_element_togglers(){\n  jQuery('[data-toggle-element]').on('click', function(){\n    var $this = jQuery(this);\n    $this.closest('.os-form-checkbox-group').toggleClass('is-checked');\n    console.log($this.data('toggle-element'));\n    jQuery($this.data('toggle-element')).toggle();\n  });\n}\n\n\nfunction latepoint_init_color_picker(){\n  if(jQuery('.latepoint-color-picker').length){\n    jQuery('.latepoint-color-picker').each(function(){\n      var color = jQuery(this).data('color');\n      var picker = jQuery(this)[0];\n      var $picker_wrapper = jQuery(this).closest('.latepoint-color-picker-w');\n      Pickr.create({\n        el: picker,\n        default: color,\n        comparison: false,\n        useAsButton: true,\n        components: {\n\n            // Main components\n            preview: true,\n            opacity: false,\n            hue: true,\n\n            // Input / output Options\n            interaction: {\n                input: false,\n                clear: false,\n                save: true\n            }\n        },\n        onChange(hsva, instance) {\n          $picker_wrapper.find('.os-form-control').val(hsva.toHEX().toString());\n        },\n      });\n    });\n  }\n}\n\n\nfunction latepoint_lightbox_close(){\n  jQuery('body').removeClass('latepoint-lightbox-active');\n  jQuery('.latepoint-lightbox-w').remove();\n}\n\nfunction latepoint_reload_select_service_categories(){\n  jQuery('.service-selector-adder-field-w').each(function(){\n    var $trigger_elem = jQuery(this);\n    var route = jQuery('.service-selector-adder-field-w').find('select').data('select-source');\n    var data = { action: 'latepoint_route_call', route_name: route, params: '', return_format: 'json' }\n    jQuery.ajax({\n      type : \"post\",\n      dataType : \"json\",\n      url : latepoint_helper.ajaxurl,\n      data : data,\n      success: function(response){\n        $trigger_elem.removeClass('os-loading');\n        if(response.status === \"success\"){\n          latepoint_lightbox_close();\n          $trigger_elem.find('select').html(response.message);\n          $trigger_elem.find('select option:last').attr('selected', 'selected');\n        }else{\n          alert(response.message, 'error');\n        }\n      }\n    });\n  });\n}\n\nfunction latepoint_wizard_item_editing_cancelled(){\n  jQuery('.os-wizard-setup-w').removeClass('is-sub-editing');\n  jQuery('.os-wizard-footer').show();\n  jQuery('.os-wizard-footer .os-wizard-next-btn').show();\n}\n\nfunction latepoint_load_quick_availability($trigger_elem, custom_agent_id = false){\n  $trigger_elem.addClass('os-loading');\n  var route = jQuery('.trigger-quick-availability').data('route');\n  var $quick_booking_form = jQuery('.quick-booking-form-w');\n\n  var agent_id = $quick_booking_form.find('select[name=\"booking[agent_id]\"]').val();\n  if(custom_agent_id){\n    agent_id = custom_agent_id;\n  }\n  var service_id = $quick_booking_form.find('input[name=\"booking[service_id]\"]').val();\n\n  var location_id = $quick_booking_form.find('.location_id_holder').val();\n\n  if(!location_id){\n    $quick_booking_form.find('select[name=\"booking[location_id]\"]').prop(\"selectedIndex\", 0);\n    location_id = $quick_booking_form.find('select[name=\"booking[location_id]\"]').val();\n  }\n  if(!agent_id){\n    $quick_booking_form.find('select[name=\"booking[agent_id]\"]').prop(\"selectedIndex\", 0);\n    agent_id = $quick_booking_form.find('select[name=\"booking[agent_id]\"]').val();\n  }\n  if(!service_id){\n    $quick_booking_form.find('.os-services-select-field-w .service-option:first').click();\n    service_id = $quick_booking_form.find('input[name=\"booking[service_id]\"]').val();\n  }\n\n  var params = 'agent_id=' + agent_id + '&service_id=' + service_id + '&location_id=' + location_id;\n  var data = { action: 'latepoint_route_call', route_name: route, params: params, return_format: 'json' }\n  jQuery.ajax({\n    type : \"post\",\n    dataType : \"json\",\n    url : latepoint_helper.ajaxurl,\n    data : data,\n    success: function(response){\n      $trigger_elem.removeClass('os-loading');\n      if(response.status === \"success\"){\n        if(jQuery('.latepoint-side-panel-w .quick-availability-per-day-w').length){\n          jQuery('.latepoint-side-panel-w .quick-availability-per-day-w').replaceWith(response.message);\n        }else{\n          jQuery('.latepoint-side-panel-w').append(response.message);\n        }\n        latepoint_init_quick_availability_form();\n      }else{\n        alert(response.message, 'error');\n      }\n    }\n  });\n}\n\nfunction latepoint_init_quick_availability_form(){\n  jQuery('.quick-availability-per-day-w select[name=\"booking[agent_id]\"]').on('change', function(){\n    latepoint_load_quick_availability(jQuery('.trigger-quick-availability'), jQuery(this).val());\n  });\n  jQuery('.os-time-group label').on('click', function(){\n    jQuery(this).closest('.os-time-group').find('.os-form-control').focus();\n  });\n  jQuery('.quick-availability-per-day-w').on('click', '.fill-booking-time', function(){\n    jQuery('.os-availability-days .agent-timeslot.selected').removeClass('selected');\n    jQuery(this).addClass('selected');\n    var date = jQuery(this).data('date');\n    var minutes = jQuery(this).data('minutes');\n    var service_duration = jQuery('.os-services-select-field-w .service-option-selected').data('duration');\n    var $form_w = jQuery('.quick-booking-form-w');\n    $form_w.find('input[name=\"booking[start_date]\"]').val(date);\n    var start_minutes = minutes;\n    var end_minutes = minutes + service_duration;\n    var start_hours_and_minutes = latepoint_minutes_to_hours_and_minutes(start_minutes);\n    var end_hours_and_minutes = latepoint_minutes_to_hours_and_minutes(end_minutes);\n\n    if(start_minutes >= 720){\n      $form_w.find('.quick-start-time-w .time-pm').click();\n    }else{\n      $form_w.find('.quick-start-time-w .time-am').click();\n    }\n\n    if(end_minutes >= 720){\n      $form_w.find('.quick-end-time-w .time-pm').click();\n    }else{\n      $form_w.find('.quick-end-time-w .time-am').click();\n    }\n\n    jQuery('.quick-booking-form-w select[name=\"booking[agent_id]\"]').val(jQuery(this).closest('.quick-availability-per-day-w').data('agent-id'));\n\n    $form_w.find('input[name=\"booking[start_time][formatted_value]\"]').val(start_hours_and_minutes);\n    $form_w.find('input[name=\"booking[end_time][formatted_value]\"]').val(end_hours_and_minutes);\n  });\n}\n\n\nfunction latepoint_init_work_period_form(){\n  latepoint_mask_timefield(jQuery('.os-time-input-w .os-mask-time'));\n}\n\nfunction latepoint_init_quick_booking_form(){\n  jQuery('.trigger-quick-availability').on('click', function(){\n    latepoint_load_quick_availability(jQuery('.open-quick-availability-btn'));\n    return false;\n  });\n  jQuery('.quick-booking-form-w input[name=\"booking[start_time][formatted_value]\"]').on('change', function(){\n    latepoint_set_booking_end_time();\n  });\n\n\n\n  latepoint_mask_timefield(jQuery('.latepoint-side-panel-w .os-mask-time'));\n  latepoint_mask_phone(jQuery('.latepoint-side-panel-w .os-mask-phone'));\n\n  jQuery('.customers-selector-search-input').keyup(function(){\n   var text = jQuery(this).val().toLowerCase();\n   jQuery('.customers-options-list .customer-option').hide();\n\n   // Search \n   jQuery('.customers-options-list .customer-option .customer-option-info-name').each(function(){\n \n      if(jQuery(this).text().toLowerCase().indexOf(\"\"+text+\"\") != -1 ){\n       jQuery(this).closest('.customer-option').show();\n      }\n    });\n });\n\n\n  \n  jQuery('.latepoint-side-panel-w').on('change', '.agent-selector', function(){\n    latepoint_apply_agent_selector_change();\n  });\n  jQuery('.latepoint-side-panel-w').on('change', 'select[name=\"booking[location_id]\"]', function(){\n    latepoint_apply_agent_selector_change();\n  });\n\n  jQuery('.latepoint-side-panel-w').on('click', '.services-options-list .service-option', function(){\n    var selected_option_html = jQuery(this).html();\n    var $selected_option = jQuery(this).closest('.os-services-select-field-w').find('.service-option-selected');\n    $selected_option.html(selected_option_html)\n                    .data('id', jQuery(this).data('id'))\n                    .data('duration', jQuery(this).data('duration'))\n                    .data('buffer-before', jQuery(this).data('buffer-before'))\n                    .data('buffer-after', jQuery(this).data('buffer-after'));\n    jQuery(this).closest('.os-services-select-field-w').removeClass('active');\n    latepoint_apply_service_selector_change();\n    return false;\n  });\n\n}\n\n\nfunction latepoint_reload_widget($widget_elem){\n  var form_data = $widget_elem.find('select, input').serialize();\n  var data = { action: 'latepoint_route_call', route_name: $widget_elem.data('os-reload-action'), params: form_data, return_format: 'json' } \n  $widget_elem.addClass('os-loading');\n  jQuery.ajax({\n    type : \"post\",\n    dataType : \"json\",\n    url : latepoint_helper.ajaxurl,\n    data : data,\n    success: function(response){\n      $widget_elem.removeClass('os-loading');\n      if(response.status === \"success\"){\n        var $updated_widget_elem = jQuery(response.message);\n        $updated_widget_elem.removeClass('os-widget-animated');\n        $widget_elem = $widget_elem.replaceWith($updated_widget_elem);\n        latepoint_init_daterangepicker($updated_widget_elem.find('.os-date-range-picker'));\n        if($widget_elem.hasClass('os-widget-top-agents')) latepoint_init_circles_charts();\n        if($widget_elem.hasClass('os-widget-daily-bookings')) latepoint_init_daily_bookings_chart();\n      }else{\n        alert(response.message);\n      }\n    }\n  });\n}\n\nfunction latepoint_load_calendar(target_date, agent_id){\n  var route_name = jQuery('.calendar-week-agent-w').data('calendar-action');\n  var params = 'target_date=' + target_date + '&selected_agent_id=' + agent_id;\n  var data = { action: 'latepoint_route_call', route_name: route_name, params: params, return_format: 'json' }\n  jQuery.ajax({\n    type : \"post\",\n    dataType : \"json\",\n    url : latepoint_helper.ajaxurl,\n    data : data,\n    success: function(response){\n      if(response.status === \"success\"){\n        jQuery('.calendar-week-agent-w').html(response.message);\n        jQuery('.calendar-load-target-date.os-loading').removeClass('os-loading');\n      }else{\n        alert(response.message);\n      }\n    }\n  });\n}\n\n\nfunction latepoint_apply_agent_selector_change(){\n  if(jQuery('.quick-availability-per-day-w').length){\n    latepoint_load_quick_availability(jQuery('.trigger-quick-availability'));\n  }\n}\n\nfunction latepoint_set_booking_end_time(){\n  var service_duration = jQuery('.os-services-select-field-w .service-option-selected').data('duration');\n  var $quick_edit_form = jQuery('form.booking-quick-edit-form');\n\n  var start_time = $quick_edit_form.find('input[name=\"booking[start_time][formatted_value]\"]').val();\n\n  if(start_time){\n    var start_time_ampm = $quick_edit_form.find('input[name=\"booking[start_time][ampm]\"]').val();\n    var start_time_minutes = latepoint_hours_and_minutes_to_minutes(start_time, start_time_ampm);\n    var end_time_minutes = parseInt(start_time_minutes) + parseInt(service_duration);\n    var end_time_ampm = (end_time_minutes >= 720) ? 'pm' : 'am';\n    var end_hours_and_minutes = latepoint_minutes_to_hours_and_minutes(end_time_minutes);\n\n    $quick_edit_form.find('input[name=\"booking[end_time][formatted_value]\"]').val(end_hours_and_minutes);\n    $quick_edit_form.find('.quick-end-time-w .time-ampm-select.time-' + end_time_ampm).click();\n    $quick_edit_form.find('input[name=\"booking[end_time][formatted_value]\"]').closest('.os-form-group').addClass('has-value');\n  }\n}\n\nfunction latepoint_apply_service_selector_change(){\n  latepoint_set_booking_end_time();\n\n  var $selected_service = jQuery('.os-services-select-field-w .service-option-selected');\n  var service_id = $selected_service.data('id');\n  var buffer_before = $selected_service.data('buffer-before');\n  var buffer_after = $selected_service.data('buffer-after');\n\n  var $quick_edit_form = jQuery('form.booking-quick-edit-form');\n  $quick_edit_form.find('input[name=\"booking[buffer_before]\"]').val(buffer_before);\n  $quick_edit_form.find('input[name=\"booking[buffer_after]\"]').val(buffer_after);\n  $quick_edit_form.find('input[name=\"booking[service_id]\"]').val(service_id);\n\n  $quick_edit_form.find('input[name=\"booking[buffer_before]\"]').closest('.os-form-group').addClass('has-value');\n  $quick_edit_form.find('input[name=\"booking[buffer_after]\"]').closest('.os-form-group').addClass('has-value');\n  $quick_edit_form.find('input[name=\"booking[service_id]\"]').closest('.os-form-group').addClass('has-value');\n\n  if(jQuery('.quick-availability-per-day-w').length){\n    latepoint_load_quick_availability(jQuery('.trigger-quick-availability'));\n  }\n  \n}\n\n\nfunction latepoint_init_daily_bookings_chart(){\n  if(typeof Chart !== 'undefined' && jQuery('#chartDailyBookings').length){\n\n    var $dailyBookingsChart = jQuery('#chartDailyBookings');\n    var dailyBookingsLabels = $dailyBookingsChart.data('chart-labels').toString().split(',');\n    var dailyBookingsValues = $dailyBookingsChart.data('chart-values').toString().split(',').map(Number);\n    var dailyBookingsChartMax = Math.max.apply(Math, dailyBookingsValues) + 10;\n\n\n\n    var fontFamily = '-apple-system, system-ui, BlinkMacSystemFont, Segoe UI, Roboto, Helvetica Neue, Arial, sans-serif';\n    // set defaults\n    Chart.defaults.global.defaultFontFamily = fontFamily;\n    Chart.defaults.global.defaultFontSize = 18;\n    Chart.defaults.global.defaultFontStyle = '400';\n\n    Chart.defaults.global.tooltips.titleFontFamily = fontFamily;\n    Chart.defaults.global.tooltips.titleFontSize = 10;\n    Chart.defaults.global.tooltips.titleFontColor = 'rgba(255,255,255,0.6)';\n    Chart.defaults.global.tooltips.titleFontStyle = '400';\n    Chart.defaults.global.tooltips.titleMarginBottom = 1;\n    Chart.defaults.global.tooltips.bodyFontFamily = fontFamily;\n    Chart.defaults.global.tooltips.bodyFontSize = 24;\n    Chart.defaults.global.tooltips.bodyFontStyle = '500';\n    Chart.defaults.global.tooltips.displayColors = false;\n    Chart.defaults.global.tooltips.xPadding = 10;\n    Chart.defaults.global.tooltips.yPadding = 8;\n    Chart.defaults.global.tooltips.yAlign = 'bottom';\n    Chart.defaults.global.tooltips.xAlign = 'center';\n    Chart.defaults.global.tooltips.cornerRadius = 0;\n    Chart.defaults.global.tooltips.intersect = false;\n\n    var ctx = $dailyBookingsChart[0].getContext(\"2d\");\n    var gradientStroke = ctx.createLinearGradient(500, 0, 100, 0);\n    gradientStroke.addColorStop(0, '#587ef8');\n    gradientStroke.addColorStop(1, '#587ef8');\n\n    var gradientFill = ctx.createLinearGradient(0, 200, 0, 50);\n    gradientFill.addColorStop(0, \"rgba(163, 165, 243, 0)\");\n    gradientFill.addColorStop(1, \"rgba(163, 165, 243, 0.2)\");\n\n    // line chart data\n    var chartDailyBookingsData = {\n      labels: dailyBookingsLabels,\n      datasets: [{\n          label: \"\",\n          fill: true,\n          lineTension: 0.3,\n          backgroundColor: \"#fff\",\n          backgroundColor: gradientFill,\n          borderColor: \"#456EFF\",\n          borderWidth: 2,\n          borderCapStyle: 'butt',\n          borderDash: [],\n          borderDashOffset: 0.0,\n          borderJoinStyle: 'miter',\n          pointBorderColor: \"#fbfcff\",\n          borderColor: gradientStroke,\n          pointBackgroundColor: \"#2755F9\",\n          pointRadius: 0,\n          pointBorderWidth: 0,\n          pointHoverRadius: 3,\n          pointHoverBorderWidth: 2,\n          pointHoverBackgroundColor: \"#587ef8\",\n          pointHoverBorderColor: \"#fff\",\n          pointHitRadius: 15,\n          data: dailyBookingsValues,\n          spanGaps: false\n        }]\n    };\n\n    // line chart init\n    var chartDailyBookings = new Chart($dailyBookingsChart, {\n      type: 'line',\n      data: chartDailyBookingsData,\n      options: {\n        responsive: true,\n        maintainAspectRatio: false,\n        legend: {\n            display: false\n        },\n        scales: {\n          xAxes: [{\n            ticks: {\n              fontSize: '10',\n              fontColor: '#8894AF',\n            },\n            gridLines: {\n                color: 'rgba(0,0,0,0)',\n                zeroLineColor: 'rgba(0,0,0,0)'\n            }\n          }],\n          yAxes: [{\n            gridLines: {\n                color: 'rgba(0,0,0,0.03)',\n                zeroLineColor: 'rgba(0,0,0,0.05)'\n            },\n            ticks: {\n              beginAtZero: true,\n              suggestedMax: dailyBookingsChartMax,\n              fontSize: '10',\n              fontColor: '#8894AF',\n            }\n          }]\n        }\n      }\n    });\n  }\n}\n\nfunction latepoint_reload_daily_agent_widgets(){\n  jQuery('.bookings-daily-agent').addClass('os-loading');\n  var selected_agent_id = jQuery('.agent-select').val();\n  var selected_service_id = jQuery('.service-select').val();\n  var target_date = jQuery('.daily-agent-monthly-calendar-w .os-day.selected').data('date');\n  var route = jQuery('.bookings-daily-agent').data('route');\n\n  var params = 'selected_agent_id=' + selected_agent_id + '&selected_service_id=' + selected_service_id + '&target_date=' + target_date;\n  var data = { action: 'latepoint_route_call', route_name: route, params: params, layout: 'none', return_format: 'json' };\n  jQuery.ajax({\n    type : \"post\",\n    dataType : \"json\",\n    url : latepoint_helper.ajaxurl,\n    data : data,\n    success: function(data){\n      if(data.status === \"success\"){\n        jQuery('.bookings-daily-agent').replaceWith(data.message);\n        latepoint_init_daily_agent_widgets();\n        latepoint_init_donut_charts();\n        latepoint_init_monthly_calendar_navigation();\n      }else{\n        // console.log(data.message);\n      }\n      jQuery('.bookings-daily-agent').removeClass('os-loading');\n    }\n  });\n}\n\nfunction latepoint_init_daily_agent_widgets(){\n  jQuery('select.agent-select, select.service-select').on('change', function(){\n    latepoint_reload_daily_agent_widgets();\n  });\n  jQuery('.daily-agent-monthly-calendar-w').on('click', '.os-day', function(){\n    jQuery('.daily-agent-monthly-calendar-w .os-day.selected').removeClass('selected');\n    jQuery(this).addClass('selected');\n    latepoint_reload_daily_agent_widgets();\n  });\n}\n\n\n\nfunction latepoint_init_donut_charts(){\n  if(typeof Chart !== 'undefined' && jQuery('.os-donut-chart').length){\n    jQuery('.os-donut-chart').each(function(index){\n      var chart_colors = jQuery(this).data('chart-colors').toString().split(',');\n      var chart_labels = jQuery(this).data('chart-labels').toString().split(',');\n      var chart_values = jQuery(this).data('chart-values').toString().split(',').map(Number);\n      var $chart_canvas = jQuery(this);\n      var chartDonut = new Chart($chart_canvas, {\n          type: 'doughnut',\n          data: {\n            labels: chart_labels,\n            datasets: [{\n              data: chart_values,\n              backgroundColor: chart_colors,\n              hoverBackgroundColor: chart_colors,\n              borderWidth: 6,\n              hoverBorderColor: 'transparent'\n            }]\n          },\n          options: {\n            legend: {\n                display: false\n            },\n            animation:{\n                animateScale:true\n            },\n            cutoutPercentage: 85,\n            responsive: true,\n            maintainAspectRatio: true, \n          }\n      });\n    });\n  }\n}\n\n\nfunction latepoint_init_circles_charts(){\n  jQuery('.circle-chart').each(function(index){\n    var chart_elem_id = jQuery(this).prop('id');\n    var max_value = jQuery(this).data('max-value');\n    var chart_value = jQuery(this).data('chart-value');\n    var chart_color = jQuery(this).data('chart-color');\n    var chart_color_fade = jQuery(this).data('chart-color-fade');\n    var myCircle = Circles.create({\n      id:                  chart_elem_id,\n      radius:              25,\n      value:               chart_value,\n      maxValue:            max_value,\n      width:               2,\n      text:                function(value){return Math.round(value);},\n      colors:              [chart_color, chart_color_fade],\n      duration:            200,\n      wrpClass:            'circles-wrp',\n      textClass:           'circles-text',\n      valueStrokeClass:    'circles-valueStroke',\n      maxValueStrokeClass: 'circles-maxValueStroke',\n      styleWrapper:        true,\n      styleText:           true\n    });\n\n  });\n\n\n}\n\n\nfunction latepoint_get_order_for_service_categories(){\n\n}\n\n\nfunction latepoint_init_daterangepicker($elem){\n  $elem.each(function(){\n    // DATERANGEPICKER\n    var picker_start_time = jQuery(this).find('input[name=\"date_from\"], .os-datepicker-date-from').val();\n    var picker_end_time = jQuery(this).find('input[name=\"date_to\"], .os-datepicker-date-to').val();\n    var locale = {};\n    if(jQuery(this).data('can-be-cleared')) locale = { cancelLabel: jQuery(this).data('clear-btn-label')};\n    jQuery(this).daterangepicker({\n      opens: 'left',\n      singleDatePicker: (jQuery(this).data('single-date') == 'yes'),\n      startDate: (picker_start_time) ? moment(picker_start_time) : moment(),\n      endDate: (picker_end_time) ? moment(picker_end_time) : moment(),\n      locale: locale\n    });\n  });\n\n  $elem.on('cancel.daterangepicker', function(ev, picker) {\n    if(picker.element.data('can-be-cleared')){\n      picker.element.find('input[name=\"date_from\"], .os-datepicker-date-from').val('');\n      picker.element.find('input[name=\"date_to\"], .os-datepicker-date-to').val('');\n      picker.element.find('span.range-picker-value').text(picker.element.data('no-value-label'));\n      if(picker.element.hasClass('os-table-filter-datepicker')){\n        latepoint_filter_table(picker.element.closest('table'), picker.element.closest('.os-form-group'));\n      }\n    }\n  });\n\n  $elem.on('apply.daterangepicker', function(ev, picker) {\n    if(picker.element.data('single-date') == 'yes'){\n      picker.element.find('.range-picker-value').text(picker.startDate.format('ll'));\n    }else{\n      picker.element.find('.range-picker-value').text(picker.startDate.format('ll') + ' - ' + picker.endDate.format('ll'));\n    }\n    picker.element.find('input[name=\"date_from\"], .os-datepicker-date-from').attr('value', picker.startDate.format('YYYY-MM-DD'));\n    picker.element.find('input[name=\"date_to\"], .os-datepicker-date-to').attr('value', picker.endDate.format('YYYY-MM-DD'));\n    if(picker.element.closest('.os-widget').length){\n      latepoint_reload_widget(picker.element.closest('.os-widget'));\n    }\n    if(picker.element.hasClass('os-table-filter-datepicker')){\n      latepoint_filter_table(picker.element.closest('table'), picker.element.closest('.os-form-group'));\n    }\n  });\n}\n\nfunction latepoint_recalculate_services_count_in_category(){\n  jQuery('.os-category-services-count').each(function(){\n    var number_of_services = jQuery(this).closest('.os-category-parent-w').find('.service-in-category-w').length;\n    jQuery(this).find('span').text(number_of_services);\n  });\n}\n\nfunction latepoint_remove_agent_box($remove_btn){\n  var $agent_box = $remove_btn.closest('.agent-box-w');\n  $agent_box.fadeOut(300, function(){ jQuery(this).remove(); });\n}\n\nfunction latepoint_remove_service_box($remove_btn){\n  var $service_box = $remove_btn.closest('.service-box-w');\n  $service_box.fadeOut(300, function(){ jQuery(this).remove(); });\n}\n\nfunction latepoint_init_monthly_view(){\n  if(!jQuery('.calendar-month-agents-w').length) return;\n  if(jQuery('.ma-days-with-bookings-w').length){\n    // var ps = new PerfectScrollbar(jQuery('.ma-days-with-bookings-w')[0]);\n  }\n\n  jQuery('#monthly_calendar_month_select, #monthly_calendar_year_select').on('change', function(){\n    var $calendar = jQuery('.calendar-month-agents-w');\n    var route_name = $calendar.data('route');\n    $calendar.addClass('os-loading');\n    var params = { month: jQuery('#monthly_calendar_month_select').val(), year: jQuery('#monthly_calendar_year_select').val() };\n    var data = { action: 'latepoint_route_call', route_name: route_name, params: params, layout: 'none', return_format: 'json' }\n    jQuery.ajax({\n      type : \"post\",\n      dataType : \"json\",\n      url : latepoint_helper.ajaxurl,\n      data : data,\n      success: function(data){\n        $calendar.removeClass('os-loading');\n        if(data.status === \"success\"){\n          $calendar.html(data.message);\n        }else{\n          // console.log(data.message);\n        }\n      }\n    });\n  });\n  jQuery('.custom-day-calendar').on('click', '.os-day', function(){\n    var $this = jQuery(this);\n    jQuery('.custom-day-calendar .os-day.selected').removeClass('selected');\n    $this.addClass('selected');\n    jQuery('.latepoint-lightbox-footer').slideDown(200);\n    if(jQuery('.custom-day-calendar').data('show-schedule') == 'yes') jQuery('.latepoint-lightbox-w').removeClass('hide-schedule');\n    jQuery('.custom_day_schedule_date').val($this.data('date'));\n    return false;\n  });\n}\n\n\nfunction latepoint_init_copy_on_click_elements(){\n  \n  jQuery('.os-click-to-copy').mouseenter(function() {\n    var position_info = jQuery(this).position();\n    var width = jQuery(this).outerWidth();\n    var position_left = position_info.left + width + 5;\n    jQuery(this).after('<div class=\"os-click-to-copy-prompt\" style=\"top: '+position_info.top+'px; left: '+position_left+'px;\">' + latepoint_helper.click_to_copy_prompt + '</div>');\n  }).mouseleave(function() {\n    jQuery(this).nextAll('.os-click-to-copy-prompt').remove();\n  });\n  jQuery('.os-click-to-copy').on('click', function(){\n    var $this = jQuery(this);\n    $this.nextAll('.os-click-to-copy-prompt').hide();\n    var $tempElement = jQuery(\"<input>\");\n    jQuery(\"body\").append($tempElement);\n    $tempElement.val($this.text()).select();\n    document.execCommand(\"Copy\");\n    $tempElement.remove();\n\n    var position_info = $this.position();\n    var width = $this.outerWidth();\n    var position_left = position_info.left + width + 5;\n    var $done_prompt = jQuery('<div class=\"os-click-to-copy-done\" style=\"top: '+position_info.top+'px; left: '+position_left+'px;\">' + latepoint_helper.click_to_copy_done + '</div>');\n    $done_prompt.insertAfter($this).animate({\n      opacity: 0,\n      left: (position_left + 20),\n    }, 600);\n    setTimeout(function(){\n      $this.nextAll('.os-click-to-copy-done').remove();\n      $this.nextAll('.os-click-to-copy-prompt').show();\n    }, 800);\n  });\n}\n\nfunction latepoint_sync_update_progress(is_removed){\n  var synced_total = jQuery('.os-sync-stat-tiles .os-tile-value span').text();\n  if(is_removed){\n    synced_total = parseInt(synced_total) - 1;\n  }else{\n    synced_total = parseInt(synced_total) + 1;\n  }\n  jQuery('.os-sync-stat-tiles .os-tile-value span').text(synced_total);\n  jQuery('.os-tile-hor-progress-chart').data('value', synced_total);\n  var chart_total = jQuery('.os-tile-hor-progress-chart').data('total');\n  var chart_value = jQuery('.os-tile-hor-progress-chart').data('value');\n  if(chart_total > 0){\n    var percent = Math.round(chart_value / chart_total * 100);\n    jQuery('.os-tile-hor-progress-chart-value').css('width', percent + '%');\n  }\n}\n\nfunction latepoint_remove_first_synced_booking_with_google(){\n  var $trigger = jQuery('.os-booking-tiny-box.is-synced:first .os-booking-sync-google-trigger');\n  if(!$trigger.length || jQuery('.remove-all-bookings-from-google-trigger').hasClass('stop-removing')){\n    jQuery('.remove-all-bookings-from-google-trigger').removeClass('os-removing').removeClass('stop-removing').find('span').text(jQuery('.remove-all-bookings-from-google-trigger').data('label-remove'));\n    return false;\n  }\n\n  var route = $trigger.data('os-remove-action');\n  var params = $trigger.data('os-params');\n  var data = { action: 'latepoint_route_call', route_name: route, params: params, layout: 'none', return_format: 'json' };\n  $trigger.addClass('os-loading');\n  jQuery.ajax({\n    type : \"post\",\n    dataType : \"json\",\n    url : latepoint_helper.ajaxurl,\n    data : data,\n    success: function(response){\n      if(response.status === \"success\"){\n        $trigger.closest('.os-booking-tiny-box').removeClass('is-synced').addClass('not-synced');\n        $trigger.removeClass('os-loading');\n        latepoint_sync_update_progress(true);\n        latepoint_remove_first_synced_booking_with_google();\n      }\n    }\n  });\n}\n\n\nfunction latepoint_sync_next_booking_with_google(){\n  var $trigger = jQuery('.os-booking-tiny-box.not-synced:first .os-booking-sync-google-trigger');\n  if(!$trigger.length || jQuery('.sync-all-bookings-to-google-trigger').hasClass('stop-syncing')){\n    jQuery('.sync-all-bookings-to-google-trigger').removeClass('os-syncing').removeClass('stop-syncing').find('span').text(jQuery('.sync-all-bookings-to-google-trigger').data('label-sync'));\n    return false;\n  }\n\n  var route = $trigger.data('os-action');\n  var params = $trigger.data('os-params');\n  var data = { action: 'latepoint_route_call', route_name: route, params: params, layout: 'none', return_format: 'json' };\n  $trigger.addClass('os-loading');\n  jQuery.ajax({\n    type : \"post\",\n    dataType : \"json\",\n    url : latepoint_helper.ajaxurl,\n    data : data,\n    success: function(response){\n      if(response.status === \"success\"){\n        $trigger.closest('.os-booking-tiny-box').removeClass('not-synced').addClass('is-synced');\n        $trigger.removeClass('os-loading');\n        latepoint_sync_update_progress(false);\n        latepoint_sync_next_booking_with_google();\n      }\n    }\n  });\n}\n\nfunction latepoint_filter_table($table, $filter_elem, reset_page = true){\n  $filter_elem.addClass('os-loading');\n  var filter_params = $table.find('.os-table-filter').serialize();\n  var $table_w = $table.closest('.table-with-pagination-w');\n  if(reset_page){\n    $table_w.find('select.pagination-page-select').val(1);\n  }else{\n    filter_params+= '&page_number='+$table_w.find('select.pagination-page-select').val();\n  }\n  var route = $table.data('route');\n  var data = { action: 'latepoint_route_call', route_name: route, params: filter_params, layout: 'none', return_format: 'json' };\n  jQuery.ajax({\n    type : \"post\",\n    dataType : \"json\",\n    url : latepoint_helper.ajaxurl,\n    data : data,\n    success: function(data){\n      $filter_elem.removeClass('os-loading');\n      if(data.status === \"success\"){\n        $table.find('tbody').html(data.message);\n        if(data.total_pages && reset_page){\n          var options = '';\n          for(var i = 1; i <= data.total_pages; i++){\n            options+= '<option>'+ i +'</option>';\n          }\n          $table_w.find('select.pagination-page-select').html(options);\n        }\n        $table_w.find('.os-pagination-from').text(data.showing_from);\n        $table_w.find('.os-pagination-to').text(data.showing_to);\n        $table_w.find('.os-pagination-total').text(data.total_records);\n      }else{\n        // console.log(data.message);\n      }\n    }\n  });\n}\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n// DOCUMENT READY\njQuery(document).ready(function( $ ) {\n\n  // Google calendar\n  if(latepoint_helper.google_calendar_is_enabled && jQuery('.os-google-cal-authorize-btn').length){\n    latepoint_helper.google_calendar = new OsGoogleCalendar();\n    latepoint_helper.google_calendar.init();\n  }\n\n  // DASHBOARD\n  latepoint_init_daily_agent_widgets();\n  latepoint_init_circles_charts();\n  latepoint_init_donut_charts();\n  latepoint_init_daily_bookings_chart();\n  latepoint_init_element_togglers();\n  latepoint_init_daterangepicker(jQuery('.os-date-range-picker'));\n  latepoint_init_monthly_calendar_navigation();\n  latepoint_init_monthly_view();\n  latepoint_init_custom_fields_form();\n  latepoint_init_reminders_form();\n  latepoint_init_coupons_form();\n  latepoint_init_copy_on_click_elements();\n\n  latepoint_init_color_picker();\n\n  jQuery('.os-main-location-selector').on('change', function(){\n    var route = jQuery(this).data('route');\n    var params = 'id=' + jQuery(this).val();\n    var data = { action: 'latepoint_route_call', route_name: route, params: params, layout: 'none', return_format: 'json' };\n    jQuery('.latepoint-content-w').addClass('os-loading');\n    jQuery.ajax({\n      type : \"post\",\n      dataType : \"json\",\n      url : latepoint_helper.ajaxurl,\n      data : data,\n      success: function(data){\n        location.reload();\n      }\n    });\n  });\n\n\n\n  $('.latepoint-mobile-top-menu-trigger').on('click', function(){\n    $(this).closest('.latepoint-all-wrapper').toggleClass('os-show-mobile-menu');\n    if($(this).closest('.latepoint-all-wrapper').hasClass('os-show-mobile-menu')){\n      $('.latepoint-side-menu-w ul.side-menu > li.has-children > a').on('click', function(){\n        $(this).closest('li').toggleClass('menu-item-sub-open-mobile');\n        return false;\n      });\n    }else{\n      $('.latepoint-side-menu-w ul.side-menu > li.has-children > a').off('click');\n    }\n    return false;\n  });\n\n  $('.latepoint-mobile-top-search-trigger-cancel').on('click', function(){\n    $(this).closest('.latepoint-all-wrapper').removeClass('os-show-mobile-search');\n    return false;\n  });\n\n  $('.latepoint-mobile-top-search-trigger').on('click', function(){\n    $(this).closest('.latepoint-all-wrapper').toggleClass('os-show-mobile-search');\n    if($(this).closest('.latepoint-all-wrapper').hasClass('os-show-mobile-search')){\n      $('.latepoint-top-search').focus();\n    }\n    return false;\n  });\n\n  $('.os-widget-header-actions-trigger').on('click', function(){\n    $(this).closest('.os-widget-header').toggleClass('os-show-actions');\n    return false;\n  });\n\n\n  $('.sync-all-bookings-to-google-trigger').on('click', function(){\n    if($(this).hasClass('os-syncing')){\n      $(this).addClass('stop-syncing');\n      $(this).find('span').text($(this).data('label-sync'));\n    }else{\n      $(this).find('span').text($(this).data('label-cancel-sync'));\n      $(this).addClass('os-syncing');\n      latepoint_sync_next_booking_with_google();\n    }\n    return false;\n  });\n\n\n  $('.remove-all-bookings-from-google-trigger').on('click', function(){\n\n    if($(this).hasClass('os-removing')){\n      $(this).addClass('stop-removing');\n      $(this).find('span').text($(this).data('label-remove'));\n    }else{\n      if(!confirm($(this).data('os-prompt'))) return false;\n      $(this).find('span').text($(this).data('label-cancel-remove'));\n      $(this).addClass('os-removing');\n      latepoint_remove_first_synced_booking_with_google();\n    }\n    return false;\n  });\n\n  \n\n\n  jQuery('.download-csv-with-filters').on('click', function(){\n    var filter_params = jQuery(this).closest('table').find('.os-table-filter').serialize();\n    filter_params+= '&download=csv';\n    jQuery(this).attr('href', this.href + '&' + filter_params);\n  });\n\n  $('select.pagination-page-select').on('change', function(){\n    latepoint_filter_table(jQuery(this).closest('.table-with-pagination-w').find('table'), jQuery(this).closest('.pagination-page-select-w'), false);\n  });\n\n  $('select.os-table-filter').on('change', function(){\n    latepoint_filter_table(jQuery(this).closest('table'), jQuery(this).closest('.os-form-group'));\n  });\n\n  $('input.os-table-filter').on('keyup', function(){\n    latepoint_filter_table(jQuery(this).closest('table'), jQuery(this).closest('.os-form-group'));\n  });\n\n\n  jQuery('.customize-agent-service-btn').on('click', function(){\n    jQuery(this).closest('.agent').toggleClass('show-customize-box');\n    return false;\n  });\n\n  jQuery('.agent-services-list').on('click', 'li', function(){\n    if(jQuery(this).hasClass('active')){\n      jQuery(this).removeClass('active');\n      jQuery(this).find('input.agent-service-connection').val('no');\n    }else{\n      jQuery(this).addClass('active');\n      jQuery(this).find('input.agent-service-connection').val('yes');\n    }\n    latepoint_count_connected_services(jQuery(this).closest('.agent'));\n    return false;\n  });\n\n  jQuery('.add-service-category-trigger').on('click', function(){\n    $('.add-service-category-box').toggle();\n    $('.os-new-service-category-form-w').toggle();\n    return false;\n  });\n\n  jQuery('.latepoint-top-search').on('keyup', function(event){\n    var $wrapper = jQuery(this).closest('.latepoint-top-search-w');\n    $wrapper.addClass('os-loading');\n    var query = jQuery(this).val();\n    if(event.keyCode == 27){\n      $wrapper.removeClass('typing');\n      jQuery('.latepoint-top-search-results-w').html('');\n      jQuery(this).val('');\n      $wrapper.removeClass('os-loading');\n      return;\n    }\n    if(query == ''){\n      $wrapper.removeClass('typing');\n      jQuery('.latepoint-top-search-results-w').html('');\n      $wrapper.removeClass('os-loading');\n      return;\n    }\n    var route = jQuery(this).data('route');\n    var params = 'query=' + query;\n    var data = { action: 'latepoint_route_call', route_name: route, params: params, layout: 'none', return_format: 'json' };\n    $wrapper.addClass('typing');\n    jQuery.ajax({\n      type : \"post\",\n      dataType : \"json\",\n      url : latepoint_helper.ajaxurl,\n      data : data,\n      success: function(data){\n        if(!$wrapper.hasClass('typing')) return;\n        $wrapper.removeClass('os-loading');\n        if(data.status === \"success\"){\n          jQuery('.latepoint-top-search-results-w').html(data.message);\n        }else{\n          // console.log(data.message);\n        }\n      }\n    });\n  });\n\n  jQuery('.appointment-status-selector').on('click', function(e){\n    e.stopPropagation();\n  });\n\n  jQuery('.aba-button-w').on('click', function(e){\n    e.stopPropagation();\n    var confirm_message = (jQuery(this).hasClass('aba-approve')) ? latepoint_helper.approve_confirm : latepoint_helper.reject_confirm;\n    if(confirm(confirm_message)){\n      var $box = jQuery(this).closest('.appointment-box-large');\n      $box.find('.appointment-status-selector select').val(jQuery(this).data('status')).change();\n    }\n    return false;\n  });\n\n\n  jQuery('.appointment-status-selector select').on('change', function(e){\n    var $wrapper = jQuery(this).closest('.appointment-status-selector');\n    var route = $wrapper.data('route');\n    var booking_id = $wrapper.data('booking-id');\n    var status = jQuery(this).val();\n    jQuery(this).closest('.appointment-box-large').attr('class', 'appointment-box-large status-' + status);\n    var params = 'id=' + booking_id + '&status=' + status;\n    var data = { action: 'latepoint_route_call', route_name: route, params: params, layout: 'none', return_format: 'json' };\n    jQuery.ajax({\n      type : \"post\",\n      dataType : \"json\",\n      url : latepoint_helper.ajaxurl,\n      data : data,\n      success: function(data){\n        if(data.status === \"success\"){\n          latepoint_add_notification(data.message);\n        }else{\n          // console.log(data.message);\n        }\n      }\n    });\n  });\n\n  jQuery('body').on('click', '.os-notifications .os-notification-close', function(){\n    jQuery(this).closest('.item').remove();\n    return false;\n  });\n\n\n  jQuery('body').on('keyup', '.os-form-group .os-form-control', function(){\n    if(jQuery(this).val()){\n      jQuery(this).closest('.os-form-group').addClass('has-value');\n    }else{\n      jQuery(this).closest('.os-form-group').removeClass('has-value');\n    }\n  });\n\n\n\n  jQuery('.os-wizard-setup-w, .latepoint-settings-w, .custom-schedule-wrapper').on('click', '.ws-head', function(){\n    var $schedule_wrapper = jQuery(this).closest('.weekday-schedule-w');\n    $schedule_wrapper.toggleClass('is-editing').removeClass('day-off');\n    $schedule_wrapper.find('.os-toggler').removeClass('off');\n    $schedule_wrapper.find('input.is-active').val(1);\n  });\n\n\n  latepoint_mask_timefield(jQuery('.os-mask-time'));\n  latepoint_mask_phone(jQuery('.os-mask-phone'));\n\n  jQuery('.latepoint').on('click', '.wizard-add-edit-item-trigger', function(e){\n    jQuery(this).addClass('os-loading');\n    var add_item_route_name = jQuery(this).data('route');\n    var item_info = {  };\n    if(jQuery(this).data('id')){\n      item_info.id = jQuery(this).data('id');\n    }\n    var data = { action: 'latepoint_route_call', route_name: add_item_route_name, params: item_info, layout: 'none', return_format: 'json' };\n    jQuery.ajax({\n      type : \"post\",\n      dataType : \"json\",\n      url : latepoint_helper.ajaxurl,\n      data : data,\n      success: function(data){\n        jQuery('.wizard-add-edit-item-trigger.os-loading').removeClass('os-loading');\n        if(data.status === \"success\"){\n          jQuery('.os-wizard-step-content-i').html(data.message);\n          jQuery('.os-wizard-setup-w').addClass('is-sub-editing');\n          jQuery('.os-wizard-footer').hide();\n        }else{\n          // console.log(data.message);\n        }\n      }\n    });\n  });\n\n\n  // WIZARD NEXT BUTTON CLICK LOGIC\n  jQuery('.addons-info-holder').on('click', '.os-install-addon-btn', function(){\n    var $install_btn = jQuery(this);\n    $install_btn.addClass('os-loading');\n\n    var data = { action: 'latepoint_route_call', route_name: $install_btn.data('route-name'), params: { addon_name: $install_btn.data('addon-name') }, layout: 'none', return_format: 'json'};\n    jQuery.ajax({\n      type : \"post\",\n      dataType : \"json\",\n      url : latepoint_helper.ajaxurl,\n      data : data,\n      success: function(response){\n        $install_btn.removeClass('os-loading');\n        if(response.status === \"success\"){\n          $install_btn.closest('.addon-box').addClass('status-installed').removeClass('status-update-available');\n          latepoint_add_notification(response.message);\n          $install_btn.closest('.addon-footer').html('<div class=\"os-addon-installed-label\"><span><i class=\"latepoint-icon latepoint-icon-checkmark\"></i></span><span>' + latepoint_helper.msg_addon_installed + '</span></div>');\n        }else{\n          if(response.code == '404'){\n            latepoint_show_data_in_lightbox(response.message);\n          }else{\n            alert(response.message);\n          }\n        }\n      }\n    });\n    return false;\n  });\n\n\n  // WIZARD NEXT BUTTON CLICK LOGIC\n  jQuery('.latepoint').on('click', '.os-wizard-next-btn', function(){\n    var $next_btn = jQuery(this);\n    $next_btn.addClass('os-loading');\n    var current_step = jQuery('#wizard_current_step').val();\n    var params = 'current_step='+current_step;\n    if(jQuery('.os-wizard-setup-w form.weekday-schedules-w').length){\n      params+= '&'+ jQuery('.os-wizard-setup-w form.weekday-schedules-w .weekday-schedule-w:not(.day-off) input').serialize();\n    }\n    var data = { action: 'latepoint_route_call', route_name: jQuery(this).data('route-name'), params: params, layout: 'none', return_format: 'json'};\n    jQuery.ajax({\n      type : \"post\",\n      dataType : \"json\",\n      url : latepoint_helper.ajaxurl,\n      data : data,\n      success: function(data){\n        $next_btn.removeClass('os-loading');\n        if(data.status === \"success\"){\n          jQuery('#wizard_current_step').val(data.step_name);\n          jQuery('.os-wizard-setup-w').attr('class', 'os-wizard-setup-w step-' + data.step_name);\n          jQuery('.os-wizard-step-content').html(data.message);\n          if(data.show_prev_btn){\n            jQuery('.os-wizard-prev-btn').show();\n          }else{\n            jQuery('.os-wizard-prev-btn').hide();\n          }\n          if(data.show_next_btn){\n            jQuery('.os-wizard-next-btn').show();\n          }else{\n            jQuery('.os-wizard-next-btn').hide();\n          }\n          if(!data.show_next_btn && !data.show_prev_btn){\n            jQuery('.os-wizard-footer').hide();\n          }else{\n            jQuery('.os-wizard-footer').show();\n          }\n        }\n      }\n    });\n    return false;\n  });\n\n  // WIZARD PREV BUTTON CLICK LOGIC\n  jQuery('.latepoint').on('click', '.os-wizard-prev-btn', function(){\n    var $prev_btn = jQuery(this);\n    $prev_btn.addClass('os-loading');\n    var current_step = jQuery('#wizard_current_step').val();\n    var params = 'current_step='+current_step;\n    var data = { action: 'latepoint_route_call', route_name: jQuery(this).data('route-name'), params: params, layout: 'none', return_format: 'json'};\n    jQuery.ajax({\n      type : \"post\",\n      dataType : \"json\",\n      url : latepoint_helper.ajaxurl,\n      data : data,\n      success: function(data){\n        $prev_btn.removeClass('os-loading');\n        if(data.status === \"success\"){\n          jQuery('#wizard_current_step').val(data.step_name);\n          jQuery('.os-wizard-setup-w').attr('class', 'os-wizard-setup-w step-' + data.step_name);\n          jQuery('.os-wizard-step-content').html(data.message);\n          if(data.show_prev_btn){\n            jQuery('.os-wizard-prev-btn').show();\n          }else{\n            jQuery('.os-wizard-prev-btn').hide();\n          }\n          if(data.show_next_btn){\n            jQuery('.os-wizard-next-btn').show();\n          }else{\n            jQuery('.os-wizard-next-btn').hide();\n          }\n          if(!data.show_next_btn && !data.show_prev_btn){\n            jQuery('.os-wizard-footer').hide();\n          }else{\n            jQuery('.os-wizard-footer').show();\n          }\n        }\n      }\n    });\n    return false;\n  });\n\n  jQuery('.latepoint-content-w').on('change', '.os-widget .os-trigger-reload-widget', function(){\n    latepoint_reload_widget(jQuery(this).closest('.os-widget'));\n  });\n\n\n  dragula([].slice.apply(document.querySelectorAll('.os-categories-ordering-w .os-category-children')), {\n    moves: function (el, container, handle) {\n      return (handle.classList.contains('os-category-drag') || handle.classList.contains('os-category-service-drag'));\n    },\n  }).on('drop', function(el){\n    var $categories_wrapper = jQuery('.os-categories-ordering-w');\n    var category_datas = [];\n    var service_datas = [];\n\n    $categories_wrapper.find('.os-category-parent-w').each(function(index){\n      var order_number = jQuery(this).index() + 1;\n      var parent_id = jQuery(this).parent().closest('.os-category-parent-w').data('id') || 0;\n      category_datas.push({id: jQuery(this).data('id'), order_number: order_number, parent_id: parent_id});\n    });\n    $categories_wrapper.find('.service-in-category-w').each(function(index){\n      var service_order_number = jQuery(this).index() + 1;\n      var category_id = jQuery(this).closest('.os-category-parent-w').data('id') || 0;\n      service_datas.push({id: jQuery(this).data('id'), order_number: service_order_number, category_id: category_id});\n    });\n    latepoint_recalculate_services_count_in_category();\n    var data = { action: 'latepoint_route_call', route_name: $categories_wrapper.data('category-order-update-route'), params: {category_datas: category_datas, service_datas: service_datas}, return_format: 'json' } \n    $categories_wrapper.addClass('os-loading');\n    jQuery.ajax({\n      type : \"post\",\n      dataType : \"json\",\n      url : latepoint_helper.ajaxurl,\n      data : data,\n      success: function(response){\n        $categories_wrapper.removeClass('os-loading');\n        if(response.status === \"success\"){\n          // latepoint_add_notification(response.message);\n        }else{\n          alert(response.message);\n        }\n      }\n    });\n  });\n\n\n  // Custom Fields Order Dragging\n  dragula([jQuery('.os-custom-fields-ordering-w')[0]], {\n    moves: function (el, container, handle) {\n      return handle.classList.contains('os-custom-field-drag');\n    },\n  }).on('drop', function(el){\n    var custom_fields_order_data = {};\n    var $custom_fields_wrapper = jQuery('.os-custom-fields-ordering-w');\n    $custom_fields_wrapper.find('.os-custom-field-form').each(function(index){\n      var new_order_number = jQuery(this).index() + 1;\n      var $field_id = jQuery(this).find('.os-custom-field-id');\n      if($field_id.length && $field_id.val()) custom_fields_order_data[$field_id.val()] = new_order_number;\n    });\n    var data = { action: 'latepoint_route_call', \n                  route_name: $custom_fields_wrapper.data('order-update-route'), \n                  params: {ordered_fields: custom_fields_order_data, \n                  fields_for: $custom_fields_wrapper.data('fields-for')}, \n                  return_format: 'json' } \n    $custom_fields_wrapper.addClass('os-loading');\n    jQuery.ajax({\n      type : \"post\",\n      dataType : \"json\",\n      url : latepoint_helper.ajaxurl,\n      data : data,\n      success: function(response){\n        $custom_fields_wrapper.removeClass('os-loading');\n      }\n    });\n  });\n\n  // Steps Order Dragging\n  dragula([jQuery('.steps-ordering-w')[0]], {\n    moves: function (el, container, handle) {\n      return handle.classList.contains('step-drag');\n    },\n  }).on('drop', function(el){\n    var step_order_data = {};\n    var $steps_wrapper = jQuery('.steps-ordering-w');\n    $steps_wrapper.find('.step-w').each(function(index){\n      var new_order_number = jQuery(this).index() + 1;\n      jQuery(this).data('step-order-number', new_order_number);\n      jQuery(this).find('input[name=\"step[order_number]\"]').val(new_order_number);\n      step_order_data[jQuery(this).data('step-name')] = new_order_number;\n    });\n    var data = { action: 'latepoint_route_call', route_name: $steps_wrapper.data('step-order-update-route'), params: {steps: step_order_data}, return_format: 'json' } \n    $steps_wrapper.addClass('os-loading');\n    jQuery.ajax({\n      type : \"post\",\n      dataType : \"json\",\n      url : latepoint_helper.ajaxurl,\n      data : data,\n      success: function(response){\n        $steps_wrapper.removeClass('os-loading');\n      }\n    });\n  });\n\n  jQuery('body.latepoint-admin').on('click', '.os-category-edit-btn, .os-category-edit-cancel-btn, .os-category-w .os-category-name', function(){\n    jQuery(this).closest('.os-category-w').toggleClass('editing');\n    return false;\n  });\n\n  jQuery('body.latepoint-admin').on('click', '.step-edit-btn, .step-edit-cancel-btn, .step-w .step-name', function(){\n    jQuery(this).closest('.step-w').toggleClass('editing');\n    return false;\n  });\n    \n  jQuery('body.latepoint-admin').on('click', '.agent-info-change-agent-btn', function(){\n    jQuery(this).closest('.agent-info-w').removeClass('selected').addClass('selecting');\n    return false;\n  });\n  \n  jQuery('body.latepoint-admin').on('click', '.agent-info-change-agent-btn', function(){\n    jQuery(this).closest('.agent-info-w').removeClass('selected').addClass('selecting');\n    return false;\n  });\n  \n\n  jQuery('body.latepoint-admin').on('click', '.customer-info-create-btn', function(){\n    jQuery(this).closest('.customer-info-w').removeClass('selecting').addClass('selected');\n    return false;\n  });\n\n  jQuery('body.latepoint-admin').on('click', '.customer-info-load-btn', function(){\n    jQuery(this).closest('.customer-info-w').removeClass('selected').addClass('selecting').find('.customers-selector-search-input').focus();\n    return false;\n  });\n\n  jQuery('body.latepoint-admin').on('click', '.customers-selector-cancel', function(){\n    jQuery(this).closest('.customer-info-w').removeClass('selecting').addClass('selected ');\n    jQuery('.customers-options-list .customer-option').show();\n    jQuery('.customers-selector-search-input').val('');\n    return false;\n  });\n\n  // CUSTOMER SELECTOR\n\n  // SERVICES SELECTOR\n  jQuery('body.latepoint-admin').on('click', '.os-services-select-field-w', function(){\n    jQuery(this).addClass('active');\n    return false;\n  });\n\n\n  jQuery('.calendar-week-agent-w').on('click', '.calendar-load-target-date', function(event){\n    jQuery(this).addClass('os-loading');\n    latepoint_load_calendar(jQuery(this).data('target-date'), jQuery('.calendar-selected-agent-id').val());\n    return false;\n  });\n\n  jQuery('.calendar-week-agent-w').on('change', '.calendar-agent-selector', function(event){\n    latepoint_load_calendar(jQuery('.calendar-start-date').val(), jQuery(this).val());\n    return false;\n  });\n\n  jQuery('.latepoint-admin').on('click', '.os-complex-agents-selector .selector-trigger', function(){\n    var $agent_wrapper = jQuery(this).closest('.agent');\n    if($agent_wrapper.hasClass('active')){\n      $agent_wrapper.removeClass('active');\n      $agent_wrapper.removeClass('show-customize-box');\n      $agent_wrapper.find('.agent-services-list li.active').removeClass('active');\n      $agent_wrapper.find('.agent-service-connection').val('no');\n    }else{\n      $agent_wrapper.addClass('active');\n      $agent_wrapper.find('.agent-services-list li').addClass('active');\n      $agent_wrapper.find('.agent-service-connection').val('yes');\n    }\n    latepoint_count_connected_services($agent_wrapper);\n    return false;\n  });\n\n  jQuery('.latepoint-admin').on('click', '.os-agents-selector .agent', function(){\n    if(jQuery(this).hasClass('active')){\n      jQuery(this).removeClass('active');\n      jQuery(this).find('.agent-service-connection').val('no');\n    }else{\n      jQuery(this).addClass('active');\n      jQuery(this).find('.agent-service-connection').val('yes');\n    }\n    return false;\n  });\n\n  jQuery('.latepoint-admin').on('click', '.os-services-selector .service', function(){\n    if(jQuery(this).hasClass('active')){\n      jQuery(this).removeClass('active');\n      jQuery(this).find('.agent-service-connection').val('no');\n    }else{\n      jQuery(this).addClass('active');\n      jQuery(this).find('.agent-service-connection').val('yes');\n    }\n    return false;\n  });\n\n  jQuery('#wpcontent').on( 'click', '.os-toggler', function( event ){\n    jQuery(this).toggleClass('off');\n    return false;\n  });\n\n\n\n  // UPLOAD/REMOVE IMAGE LINK LOGIC\n  jQuery('#wpcontent').on( 'click', '.os-image-selector-trigger', function( event ){\n    var frame;\n\n    event.preventDefault();\n\n    var $image_uploader_trigger = jQuery(this);\n    var $image_selector_w = jQuery(this).closest('.os-image-selector-w');\n    var $image_container = $image_selector_w.find('.os-image-container');\n    var $image_id_holder = $image_selector_w.find('.os-image-id-holder');\n\n    var image_exists = $image_container.find('img').length;\n\n    if(image_exists){\n      $image_id_holder.val('');\n      $image_container.removeClass('has-image');\n      $image_container.html('');\n      $image_uploader_trigger.find('.os-text-holder').text($image_uploader_trigger.data('label-set-str'));\n    }else{\n      // If the media frame already exists, reopen it.\n      if ( frame ) {\n        frame.open();\n        return false;\n      }\n      \n      // Create a new media frame\n      frame = wp.media({\n        title: 'Select or Upload Media',\n        button: { text: 'Use this media' },\n        multiple: false\n      });\n\n      frame.on( 'select', function() {\n        var attachment = frame.state().get('selection').first().toJSON();\n        $image_container.append( '<img src=\"'+attachment.url+'\" alt=\"\"/>' );\n        $image_id_holder.val( attachment.id );\n        $image_container.addClass('has-image');\n        $image_uploader_trigger.find('.os-text-holder').text($image_uploader_trigger.data('label-remove-str'));\n      });\n\n      frame.open();\n    }\n    \n    return false;\n  });\n\n\n\n  jQuery('body').on('click', '.latepoint-lightbox-close', function(){\n    latepoint_lightbox_close();\n    return false;\n  });\n\n  jQuery('body').on('click', '.latepoint-side-panel-close-trigger', function(){\n    jQuery('.latepoint-side-panel-w').remove();\n    return false;\n  });\n\n  jQuery('body').on('click', '.latepoint-quick-availability-close', function(){\n    jQuery('.quick-availability-per-day-w').remove();\n    return false;\n  });\n\n\n  jQuery('body.latepoint-admin').on('click', '.time-ampm-select', function(){\n    jQuery(this).closest('.time-ampm-w').find('.active').removeClass('active');\n    jQuery(this).addClass('active');\n    var ampm_value = jQuery(this).data('ampm-value');\n    jQuery(this).closest('.os-time-group').find('.ampm-value-hidden-holder').val(ampm_value);\n    return false;\n  });\n\n\n  jQuery('body.latepoint-admin').on('click', '.latepoint-lightbox-shadow', function(){\n    latepoint_lightbox_close();\n    return false;\n  });\n\n  jQuery('body.latepoint-admin').on('click', '.latepoint-side-panel-shadow', function(){\n    jQuery('.latepoint-side-panel-w').remove();\n    return false;\n  });\n\n  // SCHEDULE\n\n  jQuery('body.latepoint-admin').on('click', '.ws-period-remove', function(e){\n    jQuery(this).closest('.ws-period').remove();\n    return false;\n  });\n\n\n  jQuery('#wpcontent').on( 'click', '.weekday-schedule-w .os-toggler', function( event ){\n    if(jQuery(this).hasClass('off')){\n      jQuery(this).closest('.weekday-schedule-w').addClass('day-off').removeClass('is-editing').find('input.is-active').val(0);\n    }else{\n      jQuery(this).closest('.weekday-schedule-w').removeClass('day-off').addClass('is-editing').find('input.is-active').val(1);\n    }\n    return false;\n  });\n\n  \n\n});","class OsGoogleCalendar {\n  constructor(){\n  }\n  /**\n   *  On load, called to load the auth2 library and API client library.\n   */\n  init() {\n    gapi.load('client:auth2', () => {\n      gapi.client.init({\n                    clientId: latepoint_helper.google_calendar_client_id,\n                    discoveryDocs: [\"https://www.googleapis.com/discovery/v1/apis/calendar/v3/rest\"],\n                    scope: \"https://www.googleapis.com/auth/calendar.events\"\n                  }).then(() => {\n                    jQuery('.os-google-cal-authorize-btn').on('click', () => {\n                      gapi.auth2.getAuthInstance().grantOfflineAccess().then(this.saveAuthCode);\n                      return false;\n                    });\n                  });\n    });\n  }\n  saveAuthCode(authResult) {\n\n    var params = {  code: authResult['code'], \n                    agent_id: jQuery('.os-google-cal-authorize-btn').data('agent-id') \n                  };\n\n    var data = {  action: 'latepoint_route_call', \n                  route_name: jQuery('.os-google-cal-authorize-btn').data('route'), \n                  params: params, \n                  layout: 'none', \n                  return_format: 'json' \n                };\n\n    $.ajax({\n      type: 'POST',\n      url: latepoint_helper.ajaxurl,\n      dataType : \"json\",\n      headers: { 'X-Requested-With': 'XMLHttpRequest' },\n      data: data,\n      success: function(response) {\n        latepoint_add_notification(response.message);\n        location.reload();\n      }\n    });\n  }\n}"]}